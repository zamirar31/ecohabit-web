<div class="retos-container">
  
  <div class="retos-header">
    <div class="header-content">
      <h1>ğŸ† Retos EcolÃ³gicos</h1>
      <p>Participa en desafÃ­os para transformar el mundo</p>
    </div>
    
    <!-- IMPORTANTE: usar /app/retos/nuevo -->
    <a routerLink="/app/retos/nuevo" class="btn btn-primary btn-lg">
      <span>â• Nuevo Reto</span>
    </a>
  </div>

  <!-- TABS -->
  <div class="retos-tabs">
    <button
      class="tab-btn"
      [class.active]="activeTab === 'todos'"
      (click)="setTab('todos')"
    >
      Todos
    </button>

    <button
      class="tab-btn"
      [class.active]="activeTab === 'activos'"
      (click)="setTab('activos')"
    >
      Activos
    </button>

    <button
      class="tab-btn"
      [class.active]="activeTab === 'completados'"
      (click)="setTab('completados')"
    >
      Completados
    </button>

    <button
      class="tab-btn"
      [class.active]="activeTab === 'proximos'"
      (click)="setTab('proximos')"
    >
      PrÃ³ximos
    </button>
  </div>

  <!-- LISTA DE RETOS (ya filtrada) -->
  <div class="retos-grid" *ngIf="filteredRetos.length > 0; else noRetos">
    <div
      class="reto-card"
      *ngFor="let r of filteredRetos"
      [class.completed]="!r.active"
    >
      <div class="reto-status">
        <span class="status-badge" [class.active]="r.active" [class.inactive]="!r.active">
          {{ r.active ? 'ğŸŸ¢ Activo' : 'âšª Inactivo' }}
        </span>
      </div>

      <div class="reto-content">
        <h3 class="reto-name">{{ r.name }}</h3>
        
        <p class="reto-description" *ngIf="r.description">
          {{ r.description }}
        </p>

        <div class="reto-info">
          <div class="info-item">
            <span class="info-label">Puntos:</span>
            <span class="info-value">{{ r.points }} pts</span>
          </div>
          <div class="info-item">
            <span class="info-label">PerÃ­odo:</span>
            <span class="info-value">{{ r.startDate }} â†’ {{ r.endDate }}</span>
          </div>
        </div>

        <div class="progress-section">
          <div class="progress-label">
            <span>Progreso</span>
            <span class="progress-percent">75%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 75%"></div>
          </div>
        </div>
      </div>

      <div class="reto-actions">
        <!-- IMPORTANTE: usar /app/retos/editar -->
        <a
          [routerLink]="['/app/retos/editar', r.id]"
          class="btn-action btn-edit"
        >
          âœï¸ Editar
        </a>
        <button
          (click)="eliminar(r.id!)"
          class="btn-action btn-delete"
        >
          ğŸ—‘ï¸ Eliminar
        </button>
      </div>
    </div>
  </div>

  <!-- ESTADO VACÃO -->
  <ng-template #noRetos>
    <div class="empty-state">
      <div class="empty-icon">ğŸ¯</div>
      <h2>No hay retos disponibles</h2>
      <p>Crea tu primer reto y comienza a inspirar a la comunidad</p>
      <a routerLink="/app/retos/nuevo" class="btn btn-primary">
        Crear primer reto
      </a>
    </div>
  </ng-template>
</div>
