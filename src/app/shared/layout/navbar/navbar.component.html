<nav
  class="eco-navbar"
  aria-label="NavegaciÃ³n principal"
  role="navigation"
>
  <div class="navbar-container">
    
    <!-- Marca -->
    <div class="navbar-brand">
      <span class="brand-icon" aria-hidden="true">ğŸŒ¿</span>
      <a routerLink="/" class="brand-text" aria-label="Ir a la pÃ¡gina de inicio de EcoHabit">
        EcoHabit
      </a>
    </div>

    <!-- MenÃº principal escritorio -->
    <ul
      class="navbar-menu"
      *ngIf="isAuthenticated$ | async"
      aria-label="Secciones principales de la aplicaciÃ³n"
    >
      <li>
        <a
          routerLink="/app/panel"
          routerLinkActive="active"
          aria-label="Ir a mi panel eco"
        >
          Panel
        </a>
      </li>
      <li>
        <a
          routerLink="/app/acciones"
          routerLinkActive="active"
          aria-label="Ir a la secciÃ³n de acciones ecolÃ³gicas"
        >
          Acciones
        </a>
      </li>
      <li>
        <a
          routerLink="/app/retos"
          routerLinkActive="active"
          aria-label="Ir a la secciÃ³n de retos ecolÃ³gicos"
        >
          Retos
        </a>
      </li>
    </ul>

    <!-- Ãrea de autenticaciÃ³n -->
    <div class="navbar-auth">
      <!-- Logout cuando estÃ¡ autenticado -->
      <button
        *ngIf="isAuthenticated$ | async" 
        (click)="logout()" 
        class="btn btn-outline btn-sm"
        aria-label="Cerrar sesiÃ³n en EcoHabit"
      >
        ğŸšª Logout
      </button>

      <!-- Login / Registro cuando NO estÃ¡ autenticado -->
      <ng-container *ngIf="!(isAuthenticated$ | async)">
        <a
          routerLink="/login"
          class="btn btn-outline btn-sm"
          aria-label="Ir a la pÃ¡gina de inicio de sesiÃ³n"
        >
          ğŸ”‘ Login
        </a>
        <a
          routerLink="/registro"
          class="btn btn-primary btn-sm"
          aria-label="Ir a la pÃ¡gina de registro"
        >
          âœ¨ Registrarse
        </a>
      </ng-container>
    </div>

    <!-- BotÃ³n menÃº mÃ³vil (hamburguesa) -->
    <button
      class="navbar-mobile-toggle"
      (click)="toggleMenu()"
      [class.active]="isMenuOpen"
      [attr.aria-expanded]="isMenuOpen"
      aria-controls="mobile-menu"
      aria-label="Abrir o cerrar el menÃº de navegaciÃ³n"
      type="button"
    >
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- MenÃº mÃ³vil -->
  <div
    class="navbar-mobile-menu"
    *ngIf="isMenuOpen"
    id="mobile-menu"
    aria-label="MenÃº de navegaciÃ³n mÃ³vil"
  >
    <!-- MenÃº mÃ³vil autenticado -->
    <ul
      *ngIf="isAuthenticated$ | async"
      class="mobile-menu-list"
      aria-label="Opciones de navegaciÃ³n para usuarios autenticados"
    >
      <li>
        <a
          routerLink="/app/panel"
          routerLinkActive="active"
          (click)="closeMenu()"
          aria-label="Ir a mi panel eco"
        >
          ğŸ“Š Panel
        </a>
      </li>
      <li>
        <a
          routerLink="/app/acciones"
          routerLinkActive="active"
          (click)="closeMenu()"
          aria-label="Ir a mis acciones ecolÃ³gicas"
        >
          âœ¨ Acciones
        </a>
      </li>
      <li>
        <a
          routerLink="/app/retos"
          routerLinkActive="active"
          (click)="closeMenu()"
          aria-label="Ir a mis retos ecolÃ³gicos"
        >
          ğŸ† Retos
        </a>
      </li>
      <li class="divider"></li>
      <li>
        <button
          (click)="logout()"
          class="mobile-logout"
          aria-label="Cerrar sesiÃ³n"
          type="button"
        >
          ğŸšª Logout
        </button>
      </li>
    </ul>

    <!-- MenÃº mÃ³vil no autenticado -->
    <ul
      *ngIf="!(isAuthenticated$ | async)"
      class="mobile-menu-list"
      aria-label="Opciones de autenticaciÃ³n"
    >
      <li>
        <a
          routerLink="/login"
          (click)="closeMenu()"
          aria-label="Ir a la pÃ¡gina de inicio de sesiÃ³n"
        >
          ğŸ”‘ Login
        </a>
      </li>
      <li>
        <a
          routerLink="/registro"
          (click)="closeMenu()"
          aria-label="Ir a la pÃ¡gina de registro"
        >
          âœ¨ Registrarse
        </a>
      </li>
    </ul>
  </div>
</nav>
